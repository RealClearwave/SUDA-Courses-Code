# Wiki XML 搜索工具使用说明

## 功能概述
该工具用于在大型 Wiki XML 文件中进行关键词搜索。用户可以指定 XML 文件的位置，并输入想要查找的词语，程序将逐步解析 XML 文件，实时显示匹配的结果。工具支持通过输入框指定 XML 文件路径，也可以使用浏览按钮选择文件，并提供停止按钮用于终止长时间的搜索。

## 主要功能
- **实时关键词搜索**：在大型 Wiki XML 文件中搜索指定的词语或短语，支持查找页面内容和标题中的关键词。
- **指定文件路径**：用户可以通过文本框手动输入 XML 文件路径，或者点击按钮通过文件选择器选择 XML 文件。
- **搜索结果实时展示**：每当找到符合条件的页面时，程序将实时更新显示页面的 ID、标题、贡献者和匹配内容。
- **停止搜索**：用户可以在搜索过程中点击“停止”按钮，中止正在进行的搜索。
- **滚动条显示**：搜索结果较多时，结果列表支持滚动查看。

## 程序结构

### 1. `extract_pages(file_path)`
该函数逐行读取 XML 文件，提取 `<page>` 到 `</page>` 之间的内容，每次返回一个完整的页面数据，避免一次性加载整个文件到内存中，适合处理大文件。
- **输入**：XML 文件路径
- **输出**：包含完整页面内容的字符串

### 2. `search_term_in_pages(term, file_path)`
该函数逐个解析页面内容并搜索关键词。它会检查页面的标题和文本，匹配成功时返回页面的 ID、标题、贡献者和包含搜索词的文本片段。
- **输入**：搜索词、XML 文件路径
- **输出**：包含匹配结果的生成器

### 3. `perform_search(search_term, file_path)`
该函数管理搜索流程，调用 `search_term_in_pages` 搜索关键词，并将结果实时插入到界面中的表格中。搜索过程中，若标题中包含关键词，结果将优先显示在列表顶部。
- **输入**：搜索词、XML 文件路径
- **输出**：无，直接更新图形界面

### 4. 图形用户界面部分
通过 Tkinter 创建的 GUI 界面，包含以下组件：
- **文件路径输入框**：默认设置为当前目录下的 `zhwiki.xml` 文件，用户也可以手动更改。
- **浏览按钮**：用户可以点击该按钮，通过文件选择器选择 XML 文件路径。
- **关键词输入框**：用户可以在此输入需要查找的关键词或短语。
- **搜索按钮**：点击后启动搜索，并将符合条件的结果显示在列表中。
- **停止按钮**：用户可以随时中止搜索进程。
- **结果列表**：用于展示搜索结果，包括页面 ID、标题、贡献者和匹配内容。

## 使用步骤

### 1. 准备 XML 文件
将待搜索的 XML 文件准备好，默认情况下，程序会尝试读取程序所在目录下的 `zhwiki.xml` 文件。如果文件位于其他目录，可以通过手动输入路径或使用文件选择器进行选择。

### 2. 启动程序
双击或通过命令行运行该 Python 程序，启动后将显示图形用户界面。

### 3. 指定 XML 文件位置
- 在程序启动时，文件路径输入框中默认显示程序所在目录下的 `zhwiki.xml` 文件路径。如果 XML 文件在其他位置，用户可以通过输入框手动输入路径，或者点击“浏览”按钮选择文件。

### 4. 输入关键词
在关键词输入框中输入想要查找的词语或短语。

### 5. 执行搜索
点击“搜索”按钮，程序会开始解析 XML 文件并搜索包含关键词的页面，匹配的页面将逐步显示在结果列表中。每个页面会显示页面 ID、标题、贡献者和部分匹配的文本内容。

### 6. 停止搜索
在搜索过程中，如果想要中断搜索，点击“停止”按钮即可终止搜索线程。

### 7. 查看搜索结果
搜索结果会显示在结果列表中，可以通过滚动条查看完整的搜索结果。用户可以根据页面 ID、标题和贡献者信息快速定位到需要的内容。